import com.liferay.gradle.plugins.gulp.ExecuteGulpTask

buildscript {
	dependencies {
		classpath group: "com.liferay", name: "com.liferay.gradle.plugins", version: "1.0.47+"
		classpath group: "com.liferay", name: "com.liferay.gradle.plugins.gulp", version: "1.0.0+"
	}

	repositories {
		mavenLocal()

		maven {
			url "http://cdn.repository.liferay.com/nexus/content/groups/public"
		}
	}
}

configure(subprojects.findAll {it.path.startsWith ":modules:"}) {
	apply plugin: "com.liferay.plugin"
}

configure(subprojects.findAll {it.path.startsWith ":themes:"}) {
	apply plugin: "com.liferay.gulp"

	buildDir = file("build_gradle")

	tasks.withType(ExecuteGulpTask) {
		dependsOn npmInstall
	}
}